(window.webpackJsonp=window.webpackJsonp||[]).push([[13,6],{381:function(t,e,n){"use strict";n.r(e);var r=n(1),o=(n(29),n(10),{data:function(){return{isBusy:!1,enableCustomUrl:!1,downloadUrl:this.defaultUrl,stoping:!1,innerShow:this.show}},props:["show","defaultUrl","progress","completed","successed"],watch:{innerShow:function(t,e){this.$emit("update:show",t)},show:function(t,e){this.innerShow=t},defaultUrl:function(t,e){console.log(t,e),t&&!this.downloadUrl&&(this.downloadUrl=t)}},computed:{downloading:function(){return this.progress>0||this.progress<100}},methods:{start:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isBusy){e.next=2;break}return e.abrupt("return");case 2:return t.isBusy=!0,n=new Promise((function(e){return t.$emit("start",t.downloadUrl,e)})),e.next=6,n;case 6:e.sent,t.isBusy=!1;case 8:case"end":return e.stop()}}),e)})))()},stop:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.stoping=!0,n=new Promise((function(e){return t.$emit("stop",e)})),e.next=4,n;case 4:t.stoping=!1;case 5:case"end":return e.stop()}}),e)})))()}}}),c=n(24),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("b-modal",{model:{value:t.innerShow,callback:function(e){t.innerShow=e},expression:"innerShow"}},[e("div",{staticClass:"card"},[e("header",{staticClass:"card-header"},[e("p",{staticClass:"card-header-title"},[t._t("header")],2),t._v(" "),e("b-switch",{attrs:{disabled:t.isBusy},model:{value:t.enableCustomUrl,callback:function(e){t.enableCustomUrl=e},expression:"enableCustomUrl"}},[t._v(t._s(t.$t("local.customUrlTip")))])],1),t._v(" "),e("div",{staticClass:"card-content"},[e("div",{staticClass:"content"},[t.enableCustomUrl?e("div",{staticClass:"columns subtitle"},[e("div",{staticClass:"column is-11"},[e("b-input",{attrs:{disabled:t.isBusy,placeholder:t.$t("local.customUrlPlaceholder"),"icon-pack":"fas","icon-right":"undo","icon-right-clickable":""},on:{"icon-right-click":function(e){t.downloadUrl=t.defaultUrl}},model:{value:t.downloadUrl,callback:function(e){t.downloadUrl=e},expression:"downloadUrl"}})],1),t._v(" "),e("div",{staticClass:"column"},[t._t("help")],2),t._v(" "),e("div",{staticClass:"column"})]):t._e(),t._v(" "),e("b-progress",{attrs:{value:t.progress,"show-value":"",type:t.completed?"is-success":"is-info"}},[t._t("text")],2)],1)]),t._v(" "),e("footer",{staticClass:"card-footer"},[e("div",{staticClass:"card-footer-item"}),t._v(" "),e("div",{staticClass:"card-footer-item"}),t._v(" "),t.successed?e("b-button",{staticClass:"card-footer-item",attrs:{type:"is-success"},on:{click:function(e){t.innerShow=!1}}},[t._v(t._s(t.$t("common.close")))]):t.isBusy?t.isBusy||t.downloading?e("b-button",{staticClass:"card-footer-item",attrs:{loading:t.stoping,disabled:t.stoping,type:"is-danger"},on:{click:t.stop}},[t._v(t._s(t.$t("common.stop"))+"\n      ")]):t._e():e("b-button",{staticClass:"card-footer-item",attrs:{type:"is-info"},on:{click:t.start}},[t._v("\n        "+t._s(t.$t("common.start"))+"\n      ")])],1)])])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Header:n(180).default,Footer:n(113).default})},390:function(t,e,n){"use strict";n.r(e);n(31),n(21),n(30),n(51),n(36),n(52);var r=n(1),o=n(19),c=(n(10),n(29),n(70));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d=Object(c.a)("local"),f=(d.mapState,d.mapGetters),h=(d.mapActions,d.mapMutations,{computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},f(["serverHost"])),data:function(){return{show:!1,progress:0,completed:!1,successed:!1,type:void 0}},methods:{showModal:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.show=!0,!t.$refs.innerModal.isBusy){e.next=3;break}return e.abrupt("return");case 3:t.$refs.innerModal.start();case 4:case"end":return e.stop()}}),e)})))()},startCallback:function(t,e){var n=this,r=!1;this.$local.getApiInstance().setupFFmpeg(t,function(t){this.progress=t.percent,this.completed="completed"===t.typeStr,this.type=t.typeStr,this.completed&&(this.successed=t.successed)}.bind(this)).then((function(t){console.log(t),r=t})).catch((function(t){return n.$local.handleClientApiException(n,t)})).finally((function(){e(r)}))},stopCallback:function(t){var e=this;this.$local.getApiInstance().stopSetupFFmpeg().catch((function(t){return e.$local.handleClientApiException(e,t)})).finally(t)}}}),m=h,w=n(24),component=Object(w.a)(m,(function(){var t=this,e=t._self._c;return e("BaseProgressModal",{ref:"innerModal",attrs:{show:t.show,progress:t.progress,completed:t.completed,successed:t.successed,defaultUrl:"".concat(t.serverHost,"ffmpeg.7z")},on:{"update:show":function(e){t.show=e},start:t.startCallback,stop:t.stopCallback},scopedSlots:t._u([{key:"header",fn:function(){return[t._v(" "+t._s(t.$t("common.installFFmpeg"))+" ")]},proxy:!0},{key:"help",fn:function(){return[e("a",{staticClass:"button",attrs:{href:"https://github.com/giant-app/LiveWallpaper",target:"_blank"}},[e("b-icon",{attrs:{pack:"fa",icon:"question-circle"}})],1)]},proxy:!0},{key:"text",fn:function(){return["download"===t.type?[t._v("\n      "+t._s(t.$t("local.downloading",{progress:t.progress}))+"\n    ")]:"decompress"===t.type?[t._v(t._s(t.$t("local.unzipping",{progress:t.progress}))+"\n    ")]:t.completed&&t.successed?[t._v(t._s(t.$t("local.downloadComplete"))+"\n    ")]:[t._v(t._s(t.$t("local.waitStart")))]]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseProgressModal:n(381).default})}}]);