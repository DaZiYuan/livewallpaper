(window.webpackJsonp=window.webpackJsonp||[]).push([[2,10],{353:function(t,e,n){},354:function(t,e,n){"use strict";n(353)},356:function(t,e,n){"use strict";n.r(e);var r={props:["pack","icon"]},o=(n(354),n(26)),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"empty"},[e("div",[e("b-icon",{attrs:{pack:t.pack,icon:t.icon,size:"is-large"}})],1),t._v(" "),e("p",[t._t("default")],2)])}),[],!1,null,"c916fcf4",null);e.default=component.exports},373:function(t,e,n){},381:function(t,e,n){"use strict";n(373)},383:function(t,e,n){"use strict";n.r(e);n(49),n(34),n(37),n(19),n(55),n(43),n(56);var r=n(1),o=n(21),l=(n(33),n(36),n(11),n(17),n(68),n(236),n(67));function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m=Object(l.a)("local"),f=m.mapState,v=m.mapGetters,h=m.mapActions,w=(m.mapMutations,{head:function(){return{title:this.$t("local.title"),meta:[{hid:"description",name:"description",content:this.$t("local.meta.description")},{hid:"keywords",name:"keywords",content:this.$t("common.meta.keywords")},{hid:"author",name:"author",content:this.$t("common.studioName")}]}},props:{settingUrl:"",editorRouterName:{type:String,default:"editor-id"},groupEditorRouterName:{type:String,default:"group-id"}},data:function(){return{hoverWp:void 0,showSetupPlayerModal:!1,showOptionModal:!1,currentOption:void 0,currentOptionWP:void 0,switchingIntervalMinTime:void 0,switchingInterval:void 0,isOptionBusy:!1,stickBottomBar:!0,setting:JSON.parse(JSON.stringify(this.$store.state.local.setting)),categoryOptions:["all","wallpaper","group"],filterWpType:"all",firstLoading:!1}},computed:d(d({isBusy:function(){return this.isLoading||this.isLoadingSetting||this.firstLoading},isWallpaperEmpty:function(){return!(this.isLoading||this.isLoadingSetting||this.wallpapers&&0!=this.wallpapers.length)},settingLoaded:function(){return this.setting&&this.setting.wallpaper.screenOptions&&this.setting.wallpaper.screenOptions.length>0},filteredWallpapers:function(){switch(this.filterWpType){case"group":return this.wallpapers.filter((function(t){return"group"===t.info.type}));case"wallpaper":return this.wallpapers.filter((function(t){return"group"!=t.info.type}))}return this.wallpapers}},f(["wallpapers","isLoading","isLoadingSetting","isPlaying","runningWallpapers","currentAudioWP"])),v(["serverHost"])),mounted:function(){var t=new Date;t.setHours(0),t.setMinutes(1),this.switchingIntervalMinTime=t,window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)},fetch:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.firstLoading=!0,e.prev=1,t.settingLoaded){e.next=6;break}return e.next=5,t.loadSetting({handleClientApiException:function(){}});case 5:t.setting=JSON.parse(JSON.stringify(t.$store.state.local.setting));case 6:if(t.$store.state.local.setting){e.next=8;break}return e.abrupt("return");case 8:return t.filterWpType=localStorage.getItem("filterWpType")||"all",e.next=11,t.refresh({handleClientApiException:t.handleClientApiException});case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:return e.prev=15,t.firstLoading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,13,15,18]])})))()},fetchOnServer:!1,methods:d(d({},h(["refresh","setWallpaperOption","loadWallpaperOption","loadSetting","saveSetting","showWallpaper","closeWallpaper","deleteWallpaper","exploreWallpaper","updateCurrentAudioWP"])),{},{replaceByDefault:function(t){t.target.src="".concat(this.serverHost,"default-fallback-image.webp")},setFilterWpType:function(t){this.filterWpType=t,localStorage.setItem("filterWpType",t)},currentAudioWPVolumeChanged:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,option;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.currentAudioWP){n.next=3;break}return n.abrupt("return");case 3:return(option=JSON.parse(JSON.stringify(r.option))).volume=t,n.next=7,e.setWallpaperOption({wallpaper:r,option:option,handleClientApiException:e.handleClientApiException});case 7:case"end":return n.stop()}}),n)})))()},handleClientApiException:function(t){this.$local.handleClientApiException(this,t)},audioSelected:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(t),n.next=3,e.saveSetting({setting:e.setting,handleClientApiException:e.handleClientApiException});case 3:n.sent,e.updateCurrentAudioWP(),e.setting=JSON.parse(JSON.stringify(e.setting));case 6:case"end":return n.stop()}}),n)})))()},handleScroll:function(t){var e=this.$el.querySelector("#bottomBar").clientHeight,n=this.$el.querySelector("#bottomDiv").getBoundingClientRect(),r=n.top+(this.stickBottomBar?e:0);this.stickBottomBar=r>=(window.innerHeight||document.documentElement.clientHeight)||n.bottom<=0},onWPClick:function(t){this.onShowWallpaper(t)},onShowWallpaper:function(t,e){this.showWallpaper({wallpaper:t,screen:e,handleClientApiException:this.handleClientApiException,toast:this.$buefy.toast})},onEditWPClick:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=e.localePath({name:"group"===t.info.type?e.groupEditorRouterName:e.editorRouterName,params:{id:t.info.localID}}),console.log("edit",r),e.$router.push(r);case 3:case"end":return n.stop()}}),n)})))()},onOpenWPDirClick:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.exploreWallpaper({wallpaper:t,handleClientApiException:e.handleClientApiException});case 2:case"end":return n.stop()}}),n)})))()},onDeleteWPClick:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.$buefy.dialog.confirm({title:e.$t("local.deletingWallpaper"),message:e.$t("local.deletingWallpaperConfirmMessage",{delete:e.$t("common.delete").toLowerCase(),name:t.info.title}),confirmText:e.$t("common.delete"),cancelText:e.$t("common.cancel"),type:"is-danger",hasIcon:!0,onConfirm:function(){var n=Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.deleteWallpaper({wallpaper:t,handleClientApiException:e.handleClientApiException,toast:e.$buefy.toast});case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()});case 1:case"end":return n.stop()}}),n)})))()},onConfigWPClick:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.showOptionModal=!0,e.currentOptionWP=t,e.isOptionBusy=!0,n.prev=3,n.next=6,e.loadWallpaperOption({wallpaper:t});case 6:(r=new Date).setHours(0),r.setMinutes(10),t&&t.option.switchingInterval&&(o=e.GetTimeSpan(t.option.switchingInterval),l=o.hours,c=o.minutes,r.setHours(l),r.setMinutes(c)),e.switchingInterval=r,n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),e.handleClientApiException(n.t0);case 16:e.currentOption=Object.assign({},t.option),e.isOptionBusy=!1;case 18:case"end":return n.stop()}}),n,null,[[3,13]])})))()},GetTimeSpan:function(t){var e=0,n=0;if(t){var r=t.split(":");r&&(r.length>0&&(e=Number(r[0])),r.length>1&&(n=Number(r[1])))}return{hours:e,minutes:n}},onStopPClick:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.closeWallpaper({handleClientApiException:t.handleClientApiException});case 2:case"end":return e.stop()}}),e)})))()},onOptionSaveClick:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isOptionBusy=!0,e.prev=1,t.switchingInterval||"group"!==t.currentOptionWP.info.type||(t.switchingInterval=t.switchingIntervalMinTime),n="".concat(t.switchingInterval.getHours(),":").concat(t.switchingInterval.getMinutes(),":00"),t.currentOption.switchingIntervalString=n,e.next=7,t.setWallpaperOption({wallpaper:t.currentOptionWP,option:t.currentOption,handleClientApiException:t.handleClientApiException});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t.handleClientApiException(e.t0);case 12:t.isOptionBusy=!1,t.showOptionModal=!1;case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))()}})}),y=w,O=(n(381),n(26)),component=Object(O.a)(y,(function(){var t=this,e=t._self._c;return e("main",[e("b-navbar",{staticClass:"mt-3 mb-3 pr-5 pl-6",scopedSlots:t._u([{key:"start",fn:function(){},proxy:!0},{key:"end",fn:function(){return[e("b-navbar-dropdown",{attrs:{label:t.$t("common.".concat(t.filterWpType)),hoverable:""},model:{value:t.filterWpType,callback:function(e){t.filterWpType=e},expression:"filterWpType"}},[e("b-navbar-item",{attrs:{value:"all",active:"all"===t.filterWpType},on:{click:function(e){return t.setFilterWpType("all")}}},[t._v("\n          "+t._s(t.$t("common.all"))+"\n        ")]),t._v(" "),e("b-navbar-item",{attrs:{active:"group"===t.filterWpType},on:{click:function(e){return t.setFilterWpType("group")}}},[t._v("\n          "+t._s(t.$t("common.group"))+"\n        ")]),t._v(" "),e("b-navbar-item",{attrs:{active:"wallpaper"===t.filterWpType},on:{click:function(e){return t.setFilterWpType("wallpaper")}}},[t._v("\n          "+t._s(t.$t("common.wallpaper"))+"\n        ")])],1)]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"main container is-fluid"},[e("div",{staticClass:"columns is-multiline"},[t._l(t.filteredWallpapers,(function(n,r){return e("div",{key:r,staticClass:"column is-one-quarter",on:{mouseenter:function(e){t.hoverWp=n},mouseleave:function(e){t.hoverWp=!1}}},[e("div",{staticClass:"card"},[e("div",{class:{"card-image":!0,"card-image-group":"group"===n.info.type}},["group"!=n.info.type?e("figure",{staticClass:"image is-4by3",on:{click:function(e){return t.onWPClick(n)}}},[e("img",{staticClass:"wp-cover",attrs:{src:"".concat(t.serverHost,"assets/image/?localpath=").concat(n.runningData.dir,"//").concat(n.info.preview),alt:n.info.title},on:{error:t.replaceByDefault}})]):"group"===n.info.type?e("figure",{on:{click:function(e){return t.onWPClick(n)}}},[n.info.groupItems?e("div",{staticClass:"columns is-gapless is-multiline is-mobile"},t._l(n.info.groupItemWallpaperModels.slice(0,4),(function(r,o){return e("div",{key:o,staticClass:"column is-half"},[e("figure",{staticClass:"image is-4by3"},[e("img",{attrs:{src:"".concat(t.serverHost,"assets/image/?localpath=").concat(r.runningData.dir,"//").concat(r.info.preview),alt:n.info.title}})])])})),0):t._e()]):t._e(),t._v(" "),t.setting.wallpaper.screenOptions&&t.setting.wallpaper.screenOptions.length>1?e("transition",{attrs:{name:"fade"}},[t.hoverWp===n?e("nav",{staticClass:"card-top level",on:{click:function(e){return t.onWPClick(n)}}},[e("div",{staticClass:"level-left"},t._l(t.setting.wallpaper.screenOptions,(function(r){return e("b-tooltip",{key:r.screen,staticClass:"level-item",attrs:{label:r.remark||r.screen,position:"is-bottom"}},[e("div",{on:{click:function(e){return e.stopPropagation(),t.showWallpaper({wallpaper:n,handleClientApiException:t.handleClientApiException,screen:r.screen})}}},[e("b-icon",{attrs:{type:"is-white",icon:"desktop",pack:"fas"}})],1)])})),1)]):t._e()]):t._e(),t._v(" "),e("transition",{attrs:{name:"fade"}},[t.hoverWp===n?e("nav",{staticClass:"card-bottom level"},[e("div",{staticClass:"level-left"},[e("b-tooltip",{staticClass:"level-item",attrs:{label:t.$t("common.settings"),position:"is-right"}},[e("div",{on:{click:function(e){return t.onConfigWPClick(n)}}},[e("b-icon",{attrs:{type:"is-white",icon:"cog",pack:"fas"}})],1)])],1),t._v(" "),e("div",{staticClass:"level-right"},[e("b-tooltip",{staticClass:"level-item",attrs:{label:t.$t("common.delete"),position:"is-left"}},[e("div",{on:{click:function(e){return t.onDeleteWPClick(n)}}},[e("b-icon",{attrs:{type:"is-white",icon:"trash-alt",pack:"fas"}})],1)]),t._v(" "),e("b-tooltip",{staticClass:"level-item",attrs:{label:t.$t("common.edit"),position:"is-left"}},[e("div",{on:{click:function(e){return t.onEditWPClick(n)}}},[e("b-icon",{attrs:{pack:"fas",icon:"edit",type:"is-white"}})],1)]),t._v(" "),e("b-tooltip",{staticClass:"level-item",attrs:{label:t.$t("local.openFileDir"),position:"is-left"}},[e("div",{on:{click:function(e){return t.onOpenWPDirClick(n)}}},[e("b-icon",{attrs:{pack:"fas",icon:"folder-open",type:"is-white"}})],1)])],1)]):t._e()]),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1},model:{value:n.isBusy,callback:function(e){t.$set(n,"isBusy",e)},expression:"item.isBusy"}})],1),t._v(" "),e("div",{staticClass:"card-content columns"},[e("div",{staticClass:"column is-12 wptitle"},[t._v("\n              "+t._s(n.info.title)+"\n            ")])])])])})),t._v(" "),e("b-modal",{model:{value:t.showOptionModal,callback:function(e){t.showOptionModal=e},expression:"showOptionModal"}},[t.currentOptionWP?e("div",{staticClass:"setting-container"},[e("section",[e("h2",{staticClass:"title is-4"},["group"===t.currentOptionWP.info.type?[t._v("\n                "+t._s(t.$t("common.wallpaperGroup"))+"\n              ")]:"video"===t.currentOptionWP.info.type?[t._v("\n                "+t._s(t.$t("common.videoWP"))+"\n              ")]:"image"===t.currentOptionWP.info.type?[t._v("\n                "+t._s(t.$t("common.imageWP"))+"\n              ")]:t._e()],2),t._v(" "),t.currentOption?e("div",{staticClass:"setting-container"},["group"===t.currentOptionWP.info.type?[e("b-field",{attrs:{label:t.$t("dashboard.client.editor.switchingInterval")}},[e("b-timepicker",{attrs:{rounded:"",placeholder:"HH:mm",locale:"de-DE","min-time":t.switchingIntervalMinTime,icon:"clock",editable:"","enable-seconds":!1,"hour-format":"24"},model:{value:t.switchingInterval,callback:function(e){t.switchingInterval=e},expression:"switchingInterval"}})],1)]:"video"===t.currentOptionWP.info.type?[e("b-field",{attrs:{label:t.currentOption.hardwareDecoding?t.$t("common.wallpaperOptions.enableHwdec"):t.$t("common.wallpaperOptions.disableHwdec")}},[t.currentOption?e("b-switch",{attrs:{"left-label":!0},model:{value:t.currentOption.hardwareDecoding,callback:function(e){t.$set(t.currentOption,"hardwareDecoding",e)},expression:"currentOption.hardwareDecoding"}}):t._e()],1),t._v(" "),e("b-field",{attrs:{label:t.$t("dashboard.client.setting.panScan")}},[t.currentOption?e("b-switch",{attrs:{"left-label":!0},model:{value:t.currentOption.isPanScan,callback:function(e){t.$set(t.currentOption,"isPanScan",e)},expression:"currentOption.isPanScan"}}):t._e()],1),t._v(" "),e("b-field",{staticStyle:{width:"251px"},attrs:{label:t.$t("common.volume")}},[e("b-slider",{model:{value:t.currentOption.volume,callback:function(e){t.$set(t.currentOption,"volume",e)},expression:"currentOption.volume"}})],1)]:t._e()],2):t._e(),t._v(" "),e("b-loading",{attrs:{"is-full-page":!1},model:{value:t.isOptionBusy,callback:function(e){t.isOptionBusy=e},expression:"isOptionBusy"}}),t._v(" "),e("hr",{staticClass:"is-medium"})],1),t._v(" "),e("b-field",[e("p",{staticClass:"control"},[e("button",{staticClass:"button is-primary",on:{click:t.onOptionSaveClick}},[t._v("\n                "+t._s(t.$t("common.save"))+"\n              ")])])])],1):t._e()])],2),t._v(" "),e("client-only",[t.isWallpaperEmpty?e("Empty",{attrs:{pack:"fas",icon:"folder-open"}},[t._v("\n        "+t._s(t.$t("local.noWallpapers"))+"\n      ")]):t._e(),t._v(" "),e("b-loading",{attrs:{closable:!1},model:{value:t.isBusy,callback:function(e){t.isBusy=e},expression:"isBusy"}})],1)],1),t._v(" "),e("b-navbar",{staticClass:"is-spaced has-shadow",attrs:{id:"bottomBar","fixed-bottom":t.stickBottomBar}},[e("template",{slot:"brand"},[e("b-navbar-item",{attrs:{tag:"div"}},[e("b-button",{attrs:{tag:"nuxt-link",to:t.localePath(t.settingUrl||"/setting"),"icon-pack":"fas","icon-left":"cog",type:"is-primary is-light"}},[t._v(t._s(t.$t("common.settings"))+"\n        ")]),t._v(" "),e("b-dropdown",{staticStyle:{"margin-left":"0.5rem"},attrs:{"aria-role":"list",position:"is-top-right",disabled:!t.settingLoaded},on:{input:t.audioSelected},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("b-button",{attrs:{type:"is-primary is-light","icon-pack":"fas","icon-left":"disabled"==t.setting.wallpaper.audioScreen?"volume-mute":"volume-up"}})]},proxy:!0}]),model:{value:t.setting.wallpaper.audioScreen,callback:function(e){t.$set(t.setting.wallpaper,"audioScreen",e)},expression:"setting.wallpaper.audioScreen"}},[t._v(" "),e("b-dropdown-item",{attrs:{value:"disabled","aria-role":"listitem"}},[e("div",{staticClass:"media"},[e("div",{staticClass:"media-content"},[e("h3",[t._v(t._s(t.$t("common.disable")))])])])]),t._v(" "),t._l(t.setting.wallpaper.screenOptions,(function(n){return e("b-dropdown-item",{key:n.screen,attrs:{"aria-role":"listitem",value:n.screen}},[e("div",{staticClass:"media"},[e("div",{staticClass:"media-content"},[e("h3",[t._v(t._s(n.remark||n.screen))]),t._v(" "),e("small")])])])}))],2),t._v(" "),t.currentAudioWP&&t.currentAudioWP.option&&"disabled"!=t.setting.wallpaper.audioScreen?e("b-slider",{staticClass:"ml-4 mr-3",staticStyle:{width:"100px"},attrs:{title:t.currentAudioWP.info.title,value:t.currentAudioWP.option.volume},on:{change:t.currentAudioWPVolumeChanged}}):t._e(),t._v(" "),t.isPlaying?e("b-button",{staticStyle:{"margin-left":"0.5rem"},attrs:{"icon-pack":"fas","icon-left":"ban",type:"is-primary is-light"},on:{click:t.onStopPClick}},[t._v(t._s(t.$t("common.stop"))+"\n        ")]):t._e()],1)],1),t._v(" "),e("template",{slot:"end"},[e("b-navbar-item",{attrs:{tag:"div"}},[e("div",{staticClass:"buttons"},[e("b-button",{attrs:{type:"is-primary is-light","icon-pack":"fas","icon-left":"sync-alt",loading:t.isBusy},on:{click:function(e){return t.refresh({handleClientApiException:t.handleClientApiException})}}},[t._v(t._s(t.$t("common.refresh")))]),t._v(" "),e("b-button",{attrs:{tag:"nuxt-link",to:t.localePath({name:t.editorRouterName}),"icon-pack":"fas","icon-left":"file-image",type:"is-primary is-light"}},[t._v("\n            "+t._s(t.$t("dashboard.menus.createWallpaper"))+"\n          ")]),t._v(" "),e("b-button",{attrs:{tag:"nuxt-link",to:t.localePath({name:t.groupEditorRouterName}),"icon-pack":"fas","icon-left":"layer-group",type:"is-primary is-light"}},[t._v("\n            "+t._s(t.$t("dashboard.menus.createGroup"))+"\n          ")])],1)])],1)],2),t._v(" "),e("div",{attrs:{id:"bottomDiv"}})],1)}),[],!1,null,"87ab6280",null);e.default=component.exports;installComponents(component,{Empty:n(356).default})}}]);